<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ReCarry — Station-to-station deliveries (Prototype)</title>
  <meta name="description" content="ReCarry prototype — connect train travelers for platform-to-platform deliveries. Demo: client-side only." />
  <style>
    /* Palette & global */
    :root{
      --blue:#0569f5;
      --deep:#2792df;
      --accent:#ff9a00;
      --accent-2:#ff7a00;
      --bg:#f7fbff;
      --card:#ffffff;
      --muted:#6b7280;
      --success:#10b981;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:#062028}
    .wrap{max-width:1200px;margin:28px auto;padding:26px}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{display:flex;align-items:center;gap:12px}
    .brand .logo{width:56px;height:56px;border-radius:10px;background:linear-gradient(135deg,var(--deep),var(--blue));display:flex;align-items:center;justify-content:center;color:white;font-weight:800;font-size:18px}
    .brand .title{font-weight:700}
    nav{display:flex;gap:18px;align-items:center}
    nav a{color:var(--deep);text-decoration:none;font-weight:600;cursor:pointer}
    .cta{display:flex;gap:10px;align-items:center}
    .btn{padding:10px 14px;border-radius:12px;border:none;cursor:pointer;font-weight:700}
    .btn-primary{background:var(--accent);color:white;box-shadow:0 6px 18px rgba(255,138,34,0.12)}
    .btn-outline{background:transparent;border:2px solid var(--deep);color:var(--deep);border-radius:12px;padding:8px 12px}
    .container{margin-top:18px;background:var(--card);padding:26px;border-radius:18px;box-shadow:0 16px 40px rgba(12,24,64,0.06);display:flex;gap:22px}
    .left{flex:1;padding-right:6px}
    .right{width:360px}
    h1{font-size:34px;margin:0 0 8px;line-height:1.05}
    .lead{color:var(--muted);margin-bottom:12px}
    .search{display:flex;gap:10px;margin-top:14px}
    .search input{flex:1;padding:14px;border-radius:12px;border:1px solid #e6eef8;font-size:15px}
    .search button{width:110px}
    .pills{display:flex;gap:12px;margin-top:16px;align-items:center}
    .pill{padding:12px 18px;border-radius:12px;font-weight:700;cursor:pointer}
    .pill.send{background:var(--accent);color:white}
    .pill.travel{background:white;border:2px solid var(--deep);color:var(--deep)}
    .trust{margin-top:14px;background:#fff7e6;padding:12px;border-radius:10px;color:#7a4a00;border:1px solid #fff0d6}
    .live-requests{background:linear-gradient(180deg,#ffffff,#fbfdff);padding:12px;border-radius:12px;border:1px solid #eef6ff}
    .lr-title{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
    .req{display:flex;gap:12px;align-items:center;padding:12px;border-radius:12px;border:1px solid #f1f6fb;margin-bottom:10px;background:white}
    .req .num{width:44px;height:44px;border-radius:8px;background:linear-gradient(135deg,var(--deep),var(--blue));color:white;display:flex;align-items:center;justify-content:center;font-weight:800}
    .req .meta{flex:1}
    .req .meta .title{font-weight:800}
    .req .meta .sub{color:var(--muted);font-size:13px}
    .req .price{font-weight:900;color:var(--deep);margin-bottom:6px}
    .right .post-row{display:flex;gap:8px;margin-top:12px;align-items:center}
    .small-muted{color:var(--muted);font-size:13px}
    footer{margin-top:18px;text-align:center;color:var(--muted);font-size:13px}

    /* modal */
    .modal-back{position:fixed;inset:0;background:rgba(2,6,23,0.45);display:flex;align-items:center;justify-content:center;z-index:9999}
    .modal{width:94%;max-width:720px;background:white;padding:18px;border-radius:12px}
    label{font-weight:700;font-size:13px;color:#0b1e26}
    input,textarea,select{width:100%;padding:10px;margin-top:8px;border-radius:8px;border:1px solid #e6eef8;font-size:14px}
    .row{display:flex;gap:10px}
    .flex{display:flex;gap:10px;align-items:center}
    .muted{color:var(--muted)}
    @media(max-width:980px){ .container{flex-direction:column} .right{width:100%} .search button{width:100px} }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo">RC</div>
        <div>
          <div class="title">ReCarry</div>
          <div class="muted" style="font-size:13px">Station-to-station deliveries</div>
        </div>
      </div>

      <nav>
        <a id="navHow">How it works</a>
        <a id="navFeatures">Features</a>
        <a id="navPricing">Pricing</a>
        <a id="navFaq">FAQ</a>
      </nav>

      <div class="cta">
        <button id="btnLogin" class="btn btn-outline">Login</button>
        <button id="btnSignup" class="btn btn-primary">Signup</button>
      </div>
    </header>

    <div class="container" role="main">
      <div class="left">
        <h1>Forgot something at home? Get it delivered in hours via Train Travelers.</h1>
        <div class="lead">Match with verified travellers on the same train and receive platform-to-platform delivery — fast, secure and affordable.</div>

        <div class="search">
          <input id="searchInput" placeholder="Search train number or route (e.g. 12951 or Delhi → Kanpur)" />
          <button id="btnSearch" class="btn btn-outline">Search</button>
        </div>

        <div class="pills">
          <div id="btnSend" class="pill send">I want to send an item</div>
          <div id="btnTravel" class="pill travel">I am Travelling (Earn Money)</div>
        </div>

        <div class="trust">
          <span style="font-weight:800;color:var(--deep)">100% Aadhaar Verified</span> &nbsp; — &nbsp; PNR Verification &nbsp; — &nbsp; Live Tracking
        </div>

        <div style="margin-top:18px" id="infoSections">
          <!-- clickable internal sections -->
        </div>
      </div>

      <aside class="right">
        <div class="live-requests">
          <div class="lr-title">
            <div style="font-weight:800">Live requests</div>
            <div class="small-muted">Updated now</div>
          </div>

          <div id="liveList">
            <!-- dynamic requests -->
          </div>

          <div class="post-row">
            <button id="postDemo" class="btn btn-primary">Post a request (demo)</button>
            <button id="btnFilter" class="btn btn-outline">Filter</button>
          </div>
        </div>

        <div style="margin-top:12px" class="card small-muted" id="howSmall">
          <div style="font-weight:700;margin-bottom:6px">Why ReCarry?</div>
          <div class="small-muted">Safe, fast, cost-effective. Payment held in escrow till delivery confirmed.</div>
        </div>
      </aside>
    </div>

    <footer>© <span id="yr"></span> ReCarry • Demo prototype</footer>
  </div>

  <!-- Toast -->
  <div id="toast" style="position:fixed;right:20px;bottom:20px;background:var(--deep);color:white;padding:12px 16px;border-radius:10px;display:none;z-index:9999"></div>

  <!-- modal root -->
  <div id="modalRoot"></div>

  <script>
    document.getElementById('yr').textContent = new Date().getFullYear();

    /* Demo DB in localStorage */
    const DBKEY = 'recarry_v2_demo';
    function loadDB(){ return JSON.parse(localStorage.getItem(DBKEY) || JSON.stringify({
      requests:[
        {id:'r1', title:"Laptop (15\")", from:"Delhi", to:"Kanpur", time:"just now", reward:500, details:"Laptop bag and charger", postedBy:"Ankit"},
        {id:'r2', title:"Medicine (urgent)", from:"Mumbai", to:"Pune", time:"40m ago", reward:350, details:"Prescription medicine", postedBy:"Neha"},
        {id:'r3', title:"Passport docs", from:"Howrah", to:"Asansol", time:"21m ago", reward:450, details:"Passport pages and forms", postedBy:"Ritu"},
        {id:'r4', title:"Charger & Adapter", from:"Bengaluru", to:"Mysore", time:"3m ago", reward:120, details:"Phone charger", postedBy:"Ravi"}
      ],
      notifications:[]
    })); }
    function saveDB(db){ localStorage.setItem(DBKEY, JSON.stringify(db)); }

    // UI render
    function renderLive(){
      const db = loadDB();
      const out = document.getElementById('liveList');
      out.innerHTML = '';
      db.requests.forEach((r,i)=>{
        const div = document.createElement('div');
        div.className = 'req';
        div.innerHTML = `
          <div class="num">#${i+1}</div>
          <div class="meta">
            <div class="title">${r.title}</div>
            <div class="sub">${r.from} → ${r.to} · ${r.time}</div>
            <div class="muted" style="margin-top:6px">${r.details}</div>
          </div>
          <div style="text-align:right">
            <div class="price">₹${r.reward}</div>
            <div style="display:flex;flex-direction:column;gap:8px">
              <button class="btn btn-outline" onclick="offerRequest('${r.id}')">Offer</button>
              <button class="btn" style="background:transparent;color:var(--muted);" onclick="viewDetails('${r.id}')">View</button>
            </div>
          </div>
        `;
        out.appendChild(div);
      });
    }

    renderLive();

    // clickable header links — scroll to/ open small info modal
    document.getElementById('navHow').addEventListener('click', ()=> openModal(getHowHtml()));
    document.getElementById('navFeatures').addEventListener('click', ()=> openModal(getFeaturesHtml()));
    document.getElementById('navPricing').addEventListener('click', ()=> openModal(getPricingHtml()));
    document.getElementById('navFaq').addEventListener('click', ()=> openModal(getFaqHtml()));

    // primary actions
    document.getElementById('btnLogin').addEventListener('click', ()=> openLogin());
    document.getElementById('btnSignup').addEventListener('click', ()=> openSignup());
    document.getElementById('btnSearch').addEventListener('click', ()=> doSearch());
    document.getElementById('btnSend').addEventListener('click', ()=> openPostModal('sender'));
    document.getElementById('btnTravel').addEventListener('click', ()=> openPostModal('traveller'));
    document.getElementById('postDemo').addEventListener('click', ()=> openPostModal('sender'));
    document.getElementById('btnFilter').addEventListener('click', ()=> openFilter());

    document.getElementById('btnSignup').addEventListener('click', ()=> {})

    // helper: toast
    function toast(msg, time=2000){
      const t=document.getElementById('toast');
      t.textContent = msg; t.style.display='block';
      setTimeout(()=> t.style.display='none', time);
    }

    // modal system
    function openModal(html){
      document.getElementById('modalRoot').innerHTML = `
        <div class="modal-back" onclick="closeModal(event)">
          <div class="modal" onclick="event.stopPropagation()">${html}</div>
        </div>`;
    }
    function closeModal(e){ if(!e || e.target.classList.contains('modal-back')) document.getElementById('modalRoot').innerHTML=''; }

    // info HTMLs
    function getHowHtml(){ return `
      <h3>How ReCarry works</h3>
      <ol style="margin-top:10px">
        <li>Post a request with from-station → to-station, train window, photos and reward.</li>
        <li>Verified travellers on the same route receive notifications and can offer to carry.</li>
        <li>Deliverer picks up item at origin platform and confirms pickup in app (photo).</li>
        <li>Deliverer marks delivered; receiver confirms (photo or OTP) and reward is released from escrow.</li>
      </ol>
      <div style="margin-top:12px"><button class="btn btn-primary" onclick="closeModal()">Close</button></div>
    `; }
    function getFeaturesHtml(){ return `
      <h3>Features</h3>
      <ul style="margin-top:10px">
        <li>Aadhaar-based KYC (demo)</li>
        <li>PNR/train matching & route notifications</li>
        <li>Escrow payment & ratings</li>
        <li>In-app chat, pickup photo & OTP verification</li>
      </ul>
      <div style="margin-top:12px"><button class="btn btn-primary" onclick="closeModal()">Close</button></div>
    `; }
    function getPricingHtml(){ return `
      <h3>Pricing</h3>
      <p class="muted" style="margin-top:8px">We charge a small platform fee (demo). For production: integrate dynamic fees, promotional credits, monthly passes for frequent users.</p>
      <div style="margin-top:12px"><button class="btn btn-primary" onclick="closeModal()">Close</button></div>
    `; }
    function getFaqHtml(){ return `
      <h3>FAQ</h3>
      <p class="muted">Q: Is it safe? A: Use verified travellers (KYC + Ratings). For high value items, consider insurance.</p>
      <div style="margin-top:12px"><button class="btn btn-primary" onclick="closeModal()">Close</button></div>
    `; }

    // Login / Signup (demo OTP)
    function openLogin(){
      openModal(`
        <h3>Login — Phone OTP (demo)</h3>
        <label>Phone number</label>
        <input id="liPhone" placeholder="+91-XXXXXXXXXX" />
        <div style="margin-top:10px;display:flex;gap:8px">
          <button class="btn btn-primary" onclick="sendOtp()">Send OTP</button>
          <button class="btn" onclick="closeModal()">Close</button>
        </div>
        <div id="otpBox" style="display:none;margin-top:12px">
          <label>Enter OTP</label>
          <input id="liOtp" placeholder="Enter 1234" />
          <div style="margin-top:8px"><button class="btn btn-primary" onclick="verifyOtp()">Verify</button></div>
        </div>
        <div style="margin-top:12px" class="muted">Demo OTP = <strong>1234</strong></div>
      `);
    }

    function sendOtp(){
      const phone = document.getElementById('liPhone').value || '';
      if(!phone.trim()){ alert('Enter phone'); return; }
      localStorage.setItem('recarry_demo_user', JSON.stringify({phone:phone.trim(), name:'', kyc:false, wallet:0}));
      document.getElementById('otpBox').style.display='block';
      toast('OTP sent (demo): 1234');
    }
    function verifyOtp(){
      const code = document.getElementById('liOtp').value || '';
      if(code !== '1234'){ alert('Use demo code 1234'); return; }
      // mark logged in
      const u = JSON.parse(localStorage.getItem('recarry_demo_user') || '{}');
      u.name = u.name || ('User'+Math.floor(Math.random()*9000+1000));
      localStorage.setItem('recarry_demo_user', JSON.stringify(u));
      closeModal();
      toast('Logged in as '+u.name);
      updateHeaderUser();
    }

    function openSignup(){
      openModal(`
        <h3>Signup</h3>
        <label>Full name</label><input id="suName" placeholder="Your name" />
        <label>Phone</label><input id="suPhone" placeholder="+91-XXXXXXXXXX" />
        <div style="margin-top:10px;display:flex;gap:8px">
          <button class="btn btn-primary" onclick="doSignup()">Create account</button>
          <button class="btn" onclick="closeModal()">Cancel</button>
        </div>
      `);
    }
    function doSignup(){
      const name = document.getElementById('suName').value.trim();
      const phone = document.getElementById('suPhone').value.trim();
      if(!name || !phone){ alert('Enter name & phone'); return; }
      localStorage.setItem('recarry_demo_user', JSON.stringify({name,phone,kyc:false,wallet:0}));
      closeModal();
      toast('Account created (demo)');
      updateHeaderUser();
    }

    function updateHeaderUser(){
      const user = JSON.parse(localStorage.getItem('recarry_demo_user') || 'null');
      const btnLogin = document.getElementById('btnLogin');
      const btnSignup = document.getElementById('btnSignup');
      if(user){
        btnLogin.textContent = (user.name||'User') + ' • ' + (user.kyc? 'KYC' : 'Not KYC');
        btnSignup.textContent = 'Logout';
        btnSignup.onclick = ()=> { localStorage.removeItem('recarry_demo_user'); location.reload(); };
      } else {
        btnLogin.textContent = 'Login';
        btnSignup.textContent = 'Signup';
        btnSignup.onclick = ()=> openSignup();
      }
    }
    updateHeaderUser();

    // Search
    function doSearch(){
      const q = document.getElementById('searchInput').value.trim();
      if(!q){ toast('Type a train number or route to search'); return; }
      openModal(`<h3>Search results</h3><p class="muted">Showing demo matches for: <strong>${escapeHtml(q)}</strong></p>
        <div style="margin-top:8px">${getSearchResultsHtml(q)}</div>
        <div style="margin-top:12px"><button class="btn btn-primary" onclick="closeModal()">Close</button></div>`);
    }
    function escapeHtml(s){ return s.replace(/</g,'&lt;').replace(/>/g,'&gt;'); }
    function getSearchResultsHtml(q){
      const db = loadDB();
      const hits = db.requests.filter(r=> (r.title+ r.from + r.to + r.details).toLowerCase().includes(q.toLowerCase()));
      if(!hits.length) return `<div class="muted">No matches (demo)</div>`;
      return hits.map(h=>`<div class="req" style="margin-bottom:8px"><div class="num">#</div><div style="flex:1"><div style="font-weight:800">${h.title}</div><div class="muted">${h.from} → ${h.to} • ₹${h.reward}</div></div><div><button class="btn btn-outline" onclick="offerRequest('${h.id}')">Offer</button></div></div>`).join('');
    }

    // Offer / Accept flows
    function offerRequest(id){
      const user = JSON.parse(localStorage.getItem('recarry_demo_user') || 'null');
      if(!user){ openLogin(); return; }
      openModal(`
        <h3>Offer to deliver</h3>
        <p class="muted">You are offering to deliver request <strong>${id}</strong> — demo confirms instantly.</p>
        <div style="margin-top:8px;display:flex;gap:8px">
          <button class="btn btn-primary" onclick="confirmOffer('${id}')">Confirm Offer</button>
          <button class="btn" onclick="closeModal()">Cancel</button>
        </div>
      `);
    }
    function confirmOffer(id){
      const db = loadDB();
      const r = db.requests.find(x=>x.id===id);
      if(!r){ alert('Request not found'); closeModal(); return; }
      r.takenBy = JSON.parse(localStorage.getItem('recarry_demo_user') || '{}').name || 'Traveller';
      r.status = 'accepted';
      saveDB(db);
      closeModal();
      toast('You accepted the request (demo). Follow in-app steps to pickup & deliver.');
      // add a notification
      db.notifications.push({text:`${r.takenBy} accepted ${r.title}`, time:new Date().toLocaleString()});
      saveDB(db);
      renderLive();
    }

    function viewDetails(id){
      const db = loadDB();
      const r = db.requests.find(x=>x.id===id);
      if(!r){ alert('Not found'); return; }
      openModal(`<h3>${r.title}</h3>
        <p><strong>${r.from} → ${r.to}</strong> · <span class="muted">${r.time}</span></p>
        <p class="muted">${r.details}</p>
        <p style="margin-top:8px"><strong>Reward: ₹${r.reward}</strong></p>
        <div style="margin-top:12px"><button class="btn btn-primary" onclick="offerRequest('${id}')">Offer</button> <button class="btn" onclick="closeModal()">Close</button></div>`);
    }

    // Post modal
    function openPostModal(mode){
      const title = mode==='traveller' ? 'Sign up as Traveller (Earn money)' : 'Post a request (Sender)';
      openModal(`
        <h3>${title}</h3>
        <label>From station</label><input id="p_from" placeholder="e.g. New Delhi" />
        <label>To station</label><input id="p_to" placeholder="e.g. Kanpur" />
        <label>Train no / name</label><input id="p_train" placeholder="e.g. 12425" />
        <label>Time window</label><input id="p_window" placeholder="Today 15:00 - 18:00" />
        <label>Item description</label><textarea id="p_desc" rows="3"></textarea>
        <label>Reward (₹)</label><input id="p_reward" type="number" placeholder="100" />
        <div style="margin-top:10px;display:flex;gap:8px">
          <button class="btn btn-primary" onclick="submitPost()">Post (demo)</button>
          <button class="btn" onclick="closeModal()">Cancel</button>
        </div>
        <div style="margin-top:8px" class="muted">Demo: reward held in local wallet. In production integrate payment & escrow (Razorpay/Stripe).</div>
      `);
    }

    function submitPost(){
      const from = document.getElementById('p_from').value.trim();
      const to = document.getElementById('p_to').value.trim();
      const train = document.getElementById('p_train').value.trim();
      const window = document.getElementById('p_window').value.trim();
      const desc = document.getElementById('p_desc').value.trim();
      const reward = parseInt(document.getElementById('p_reward').value || 0);
      if(!from || !to || !train || !window || !desc || !reward){ alert('Fill all fields'); return; }
      const db = loadDB();
      const id = 'r' + Math.random().toString(36).slice(2,8);
      db.requests.push({id, title: desc.split('\n')[0].slice(0,40), from, to, time: 'just now', reward, details:desc, postedBy:'You'});
      saveDB(db);
      closeModal();
      toast('Request posted (demo)');
      renderLive();
    }

    // Filter
    function openFilter(){
      openModal(`
        <h3>Filter requests</h3>
        <label>From station</label><input id="f_from" placeholder="e.g. Delhi" />
        <label>To station</label><input id="f_to" placeholder="e.g. Kanpur" />
        <div style="margin-top:10px;display:flex;gap:8px">
          <button class="btn btn-primary" onclick="applyFilter()">Apply</button>
          <button class="btn" onclick="closeModal()">Close</button>
        </div>
      `);
    }
    function applyFilter(){
      const f_from = document.getElementById('f_from').value.trim().toLowerCase();
      const f_to = document.getElementById('f_to').value.trim().toLowerCase();
      const db = loadDB();
      const filtered = db.requests.filter(r=>{
        if(f_from && !r.from.toLowerCase().includes(f_from)) return false;
        if(f_to && !r.to.toLowerCase().includes(f_to)) return false;
        return true;
      });
      if(!filtered.length) { alert('No matches'); return; }
      closeModal();
      openModal(`<h3>Filter results</h3><div style="margin-top:8px">${filtered.map(r=>`<div style="margin-bottom:8px"><strong>${r.title}</strong> — ${r.from} → ${r.to} • ₹${r.reward}</div>`).join('')}</div><div style="margin-top:12px"><button class="btn btn-primary" onclick="closeModal()">Close</button></div>`);
    }

    // small helper to show notices in left info area:
    document.getElementById('infoSections').innerHTML = `
      <div class="card small-muted" style="padding:12px;border-radius:12px;margin-top:12px">
        <div style="font-weight:800">Quick safety</div>
        <ul style="margin-top:8px;color:var(--muted)">
          <li>Verify deliverer KYC badge before handing high-value items.</li>
          <li>Use escrow payments — do not hand cash before confirmation.</li>
          <li>Prefer local travelers with high ratings.</li>
        </ul>
      </div>
    `;

    // update header user on load
    updateHeaderUser();
  </script>
</body>
</html>
